---

- name: check if baloo is disabled
  shell: balooctl status | grep 'Baloo is currently disabled. To enable, please run balooctl enable'
  register: exitcode_baloo_check
  ignore_errors: true
  changed_when: false

- name: disable baloo
  shell: balooctl disable
  changed_when: false

- name: delete baloo index
  shell: balooctl purge
  when: exitcode_baloo_check.rc != 0
  changed_when: false

- name: dont let baloo do contentindexing
  shell: balooctl config set contentIndexing no
  when: exitcode_baloo_check.rc != 0
  changed_when: false

- name: kill baloo processes if existing
  shell: pkill -kill baloorunner;pkill -kill baloo_file
  when: exitcode_baloo_check.rc != 0
  ignore_errors: true
  changed_when: false
